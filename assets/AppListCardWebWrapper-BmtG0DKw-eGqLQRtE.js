import{j as e}from"./vendor-motion-C-S6sOG7.js";import{o as r,al as t,ak as a,am as s,an as n,ao as o,ap as c,aq as u,ar as i}from"./index-S7FKDcGU-BGCLkj0f.js";import{r as l}from"./vendor-react-HserkeQh.js";import"./index-gfgZRmwe.js";o().or(c()).or(u(c())).transform(e=>"string"==typeof e?e.split(",").map(e=>Number(e)):Array.isArray(e)?e:[e]),i(e=>o().parse(e).split(","),o().array()).or(o().array());const m=n({hl:o().optional()});function f(n){const{slug:o,shouldHighlight:c}=n,{data:{hl:u}}=function(e){const t=r.useRouter(),a=s(),n=r.usePathname(),o=e.safeParse(a);let c=l.useMemo(()=>({}),[]);l.useEffect(()=>{o.success&&o.data&&Object.entries(o.data).forEach(([e,r])=>{if(e in a||!r)return;const s=new URLSearchParams(c);s.set(String(e),String(r)),t.replace(`${n}?${s.toString()}`)})},[o,e,t,n,a,c]),o.success?c=o.data:o.success;const u=l.useCallback(function(e,r){const a=new URLSearchParams(c);a.set(String(e),String(r)),t.replace(`${n}?${a.toString()}`)},[c,t]);function i(e){const r=new URLSearchParams(c);r.delete(String(e)),t.replace(`${n}?${r.toString()}`)}return{data:c,setQuery:u,removeByKey:i,pushItemToKey:function(e,r){const t=c[e];if(Array.isArray(t)){if(t.includes(r))return;u(e,[...t,r])}else u(e,[r])},removeItemByKeyAndValue:function(e,r){const t=c[e];if(Array.isArray(t)&&t.length>1){const a=t.filter(e=>e!==r);u(e,a)}else i(e)},removeAllQueryParams:function(){null!==n&&t.replace(n)}}}(m),i=r.useRouter(),[f,p]=l.useState(c&&u===o),y=l.useRef(null),d=t(),g=r.usePathname();return l.useEffect(()=>(c&&f&&null!==d&&null!==g&&(y.current=setTimeout(()=>{const e=new URLSearchParams(d.toString());e.delete("hl"),e.delete("category"),p(!1);const r=e.toString();i.replace(`${g}${""!==r?`?${r}`:""}`)},3e3)),()=>{y.current&&(clearTimeout(y.current),y.current=null)}),[f,g,i,d,c]),e.jsx(a,{...n})}export{f as default};
