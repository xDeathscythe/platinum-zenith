import{j as e}from"./vendor-motion-C-S6sOG7.js";import{o as a,J as t,p as l,a3 as s,C as n,m as r,I as c,G as i}from"./index-S7FKDcGU-CrgIpLGq.js";import{r as m}from"./vendor-react-HserkeQh.js";import{Z as o}from"./AppCard-CQEg94Y3-KCVUm4YI.js";import{e as u,a as d,n as p}from"./currencyOptions-r01lKGBF-C7joIfUJ.js";import"./index-xtWHeA43.js";const v=function({app:v,eventType:b,onAppInstallSuccess:x}){var f,h;const j=a.useSearchParams(),y=a.usePathname(),g=m.useMemo(()=>`${y}${j?`?${j.toString()}`:""}`,[y,j]),{t:S}=t(),{getAppData:k,setAppData:N}=l(),w=k("price"),C=k("currency"),F=k("paymentOption"),O=k("enabled"),[A,P]=m.useState(u.find(e=>e.value===C)),[D,G]=m.useState(p(C)?d[C]:""),[I,$]=m.useState(O),_=(null==(f=s)?void 0:f.find(e=>F===e.value))||{label:s[0].label,value:s[0].value},E=void 0!==(null==(h=b.recurringEvent)?void 0:h.count);return e.jsx(o,{onAppInstallSuccess:x,returnTo:i+g,app:v,switchChecked:I,switchOnClick:e=>{$(e)},description:e.jsx(e.Fragment,{children:"Add a mock payment to your events"}),children:e.jsx(e.Fragment,{children:E?e.jsx(n,{className:"mt-2",severity:"warning",title:S("warning_recurring_event_payment")}):I&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-2 block items-center sm:flex",children:e.jsx(r,{id:"test-mock-payment-app-price",label:"Price",labelSrOnly:!0,addOnLeading:D,addOnSuffix:C,step:"0.01",min:"0.5",type:"number",required:!0,className:"block w-full rounded-sm pl-2 text-sm",placeholder:"Price",onChange:e=>{N("price",100*Number(e.target.value)),A&&N("currency",A.value)},value:w>0?w/100:void 0})}),e.jsxs("div",{className:"mt-5 w-60",children:[e.jsx("label",{className:"text-default mb-1 block text-sm font-medium",htmlFor:"currency",children:S("currency")}),e.jsx(c,{id:"test-mock-payment-app-currency-id",variant:"default",options:u,value:A,className:"text-black",defaultValue:A,onChange:e=>{e&&(P(e),G(d[e.value]),N("currency",e.value))}})]}),e.jsxs("div",{className:"mt-4 w-60",children:[e.jsx("label",{className:"text-default mb-1 block text-sm font-medium",htmlFor:"currency",children:"Payment option"}),e.jsx(c,{defaultValue:_?{..._,label:S(_.label)}:{...s[0],label:S(s[0].label)},options:s.map(e=>({...e,label:S(e.label)||e.label})),onChange:e=>{e&&N("paymentOption",e.value)},className:"mb-1 h-[38px] w-full",isDisabled:!1})]})]})})})};export{v as default};
