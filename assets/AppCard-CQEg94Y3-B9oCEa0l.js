import{j as e}from"./vendor-motion-C-S6sOG7.js";import{J as s,E as l,p as a,e as n,z as t,R as i,a as d,h as r,u as c,w as o,j as u,s as p,t as m,A as x,Q as f,f as h}from"./index-S7FKDcGU-BGCLkj0f.js";const j=({children:s,ref:l,as:a})=>e.jsx(a?x:"h2",{ref:l,className:"text-emphasis text-base font-semibold leading-none",children:s}),g=({children:s,ref:l,as:a})=>e.jsx(a?x:"h3",{ref:l,className:"text-subtle line-clamp-1 text-sm break-all",children:s}),b=({ref:s,name:l,size:a="md",iconSlot:n})=>e.jsx("div",{ref:s,className:r("bg-default border-subtle border-subtle flex items-center justify-center border","sm"===a&&"rounded-md p-1","md"===a&&"rounded-[10px] p-1.5"),children:n||e.jsx(c,{name:l,className:r("sm"===a&&"h-4 w-4","md"===a&&"h-6 w-6")})}),v=Object.assign(({children:s,ref:a,className:n})=>{const[t]=l();return e.jsx("div",{ref:t,className:r("bg-cal-muted flex flex-col gap-4 rounded-2xl p-4",n),children:s})},{Header:({children:s,ref:l,icon:a,title:n,description:t,iconSlot:i,rawHeading:d})=>e.jsxs("div",{ref:l,className:"flex items-center justify-between flex-wrap sm:flex-nowrap gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[a&&!i&&e.jsx(b,{name:a}),i&&e.jsx(b,{iconSlot:i}),e.jsxs("div",{className:"flex flex-col gap-0.5",children:[n&&e.jsx(j,{children:n}),t&&e.jsx(g,{children:t}),d&&d]})]}),s]}),Content:({children:s,ref:l})=>e.jsx("div",{ref:l,className:"flex flex-col gap-4",children:s}),Title:j,Description:g,SubSection:({children:s,ref:a})=>{const[n]=l();return e.jsx("div",{ref:n,className:"border-muted bg-default flex flex-col gap-4 rounded-xl border p-3",children:s})},SubSectionHeader:({children:s,ref:l,icon:a,title:n,classNames:t,justify:i="between",labelFor:d})=>e.jsxs("div",{ref:l,className:r("flex items-center gap-2","between"===i?"justify-between":"justify-start",null==t?void 0:t.container),children:[e.jsxs("div",{className:r("flex items-center gap-2",null==t?void 0:t.title),children:[a&&e.jsx(b,{name:a,size:"sm"}),e.jsx("div",{className:r("flex",null==t?void 0:t.title),children:e.jsx("h4",{className:"text-default text-sm font-medium leading-none",id:d,children:n})})]}),s]}),SubSectionContent:({children:s,ref:l,invert:a,classNames:n})=>e.jsx("div",{ref:l,className:r("bg-cal-muted flex flex-col rounded-lg px-[6px] py-1",a&&"bg-default border-subtle border",null==n?void 0:n.container),children:s}),SubSectionNested:({children:s,ref:l})=>e.jsx("div",{ref:l,className:"bg-default border-subtle flex flex-col gap-2 rounded-xl border p-2",children:s})});function N({appId:l,app:a,className:n,returnTo:t,teamId:i,onAppInstallSuccess:d}){const{t:c}=s(),{data:x}=function(e,s){const{status:l}=f.useSession();return h.viewer.apps.appById.useQuery({appId:e},{enabled:"authenticated"===l&&((null==s?void 0:s.enabled)??!0)})}(l,{enabled:!a}),j=a??x,g=u(null,{returnTo:t,onSuccess:e=>{d(),(null==e||!e.setupPending)&&p(c("app_successfully_installed"),"success")},onError:e=>{e instanceof Error&&p(e.message||c("app_could_not_be_installed"),"error")}});return j?e.jsx(m,{type:j.type,teamsPlanRequired:j.teamsPlanRequired,wrapperClassName:r("[@media(max-width:260px)]:w-full",n),render:({useDefaultComponent:s,...l})=>(s&&(l={...l,onClick:()=>{g.mutate({type:j.type,variant:j.variant,slug:j.slug,...i&&{teamId:i}})}}),e.jsx(o,{loading:g.isPending,color:"secondary",className:"[@media(max-width:260px)]:w-full [@media(max-width:260px)]:justify-center",StartIcon:"plus",...l,children:c("add")}))}):null}function w({app:u,switchOnClick:p,switchChecked:m,children:x,returnTo:f,teamId:h,disableSwitch:j,switchTooltip:g,hideSettingsIcon:b=!1,hideAppCardOptions:w=!1,onAppInstallSuccess:S}){const{t:y}=s(),[I]=l(),{setAppData:_,LockedIcon:k,disabled:C}=a(),A=n();return e.jsxs(v,{className:r(!(null!=u&&u.isInstalled)&&"rounded-xl"),children:[e.jsx(v.Header,{rawHeading:e.jsxs("div",{children:[e.jsxs("div",{className:"flex w-full items-center gap-1",children:[e.jsx(v.Title,{children:null==u?void 0:u.name}),!(null!=u&&u.isInstalled)&&e.jsx("span",{className:"bg-emphasis ml-1 rounded px-1 py-0.5 text-xs font-medium leading-3 tracking-[0.01em]",children:(null==u?void 0:u.categories[0].charAt(0).toUpperCase())+(null==u?void 0:u.categories[0].slice(1))})]}),e.jsx(v.Description,{children:null==u?void 0:u.description})]}),iconSlot:e.jsx(d,{href:`/apps/${u.slug}`,className:"flex h-8 w-8 items-center justify-center",children:e.jsx("img",{className:r((null==u?void 0:u.logo.includes("-dark"))&&"dark:invert","max-h-full max-w-full object-contain"),src:null==u?void 0:u.logo,alt:null==u?void 0:u.name})}),children:e.jsx("div",{children:e.jsx("div",{children:null!=u&&u.isInstalled||u.credentialOwner?e.jsx("div",{className:"ml-auto flex items-center",children:e.jsx(t,{size:"sm",disabled:!u.enabled||C||j,onCheckedChange:e=>{i.capture("event_type_app_switch_toggled",{app_slug:u.slug,enabled:e}),p&&p(e),_("enabled",e)},checked:m,LockedIcon:k,"data-testid":`${u.slug}-app-switch`,tooltip:g})}):e.jsx(N,{className:"ml-auto flex items-center",appId:u.slug,app:u,returnTo:f,teamId:h,onAppInstallSuccess:S})})})}),w?null:(null==u?void 0:u.isInstalled)&&m&&e.jsx("div",{ref:I,children:void 0===u.isSetupAlready||u.isSetupAlready?e.jsxs("div",{className:"relative text-sm [&_input]:mb-0 [&_input]:leading-4",children:[!b&&!A&&e.jsx(d,{href:`/apps/${u.slug}/setup`,className:"absolute right-0 top-0 ",children:e.jsx(c,{name:"settings",className:"text-default h-4 w-4","aria-hidden":"true"})}),x]}):e.jsxs("div",{className:"flex h-64 w-full flex-col items-center justify-center gap-4 ",children:[e.jsx("p",{children:y("this_app_is_not_setup_already")}),e.jsx(d,{href:`/apps/${u.slug}/setup`,children:e.jsx(o,{StartIcon:"settings",children:y("setup")})})]})})]})}export{w as Z,v as h};
