import{j as e}from"./vendor-motion-C-S6sOG7.js";import{r as s}from"./vendor-react-HserkeQh.js";import{J as t,w as a,O as i,P as l,g as n,h as r,C as o,Z as c,T as d,u as m}from"./index-S7FKDcGU-CrgIpLGq.js";import"./index-xtWHeA43.js";const p="search",x=x=>{const{t:h}=t(),[u,f]=s.useState(""),[g,j]=s.useState(0),[y,b]=s.useState(""),{isOpenDialog:v,setIsOpenDialog:N}=x,[S,k]=s.useState(!1),[w,C]=s.useState(""),[O,_]=s.useState(p),I=async(e,s)=>{if(S)return;k(!0),C("");const t=await fetch("/api/integrations/giphy/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({keyword:e,offset:s})}),a=await t.json();return t.ok?(f(a.image||""),j(a.nextOffset),a.image||C("No Result found")):C((null==a?void 0:a.message)||"Something went wrong"),k(!1),null},D=(s,t,a)=>e.jsxs("div",{className:r("flex cursor-pointer items-center border-b-2 p-2 text-sm ",O===a?"text-default border-emphasis":"text-subtle border-transparent"),onClick:()=>{b(""),f(""),_(a)},children:[e.jsx(m,{name:s,className:"h-4 w-4 ltr:mr-2 rtl:ml-2"}),t]});return e.jsx(i,{open:v,onOpenChange:N,children:e.jsxs(l,{children:[e.jsx("h3",{className:"font-cal text-emphasis text-xl",id:"modal-title",children:h("add_gif_to_confirmation")}),e.jsx("p",{className:"text-subtle mb-3 text-sm font-light",children:h("find_gif_spice_confirmation")}),e.jsxs("div",{className:"border-emphasis flex items-center border-b border-solid",children:[D("search",h("search_giphy"),p),D("link",h("add_link_from_giphy"),"url")]}),e.jsxs("form",{className:"flex w-full justify-center space-x-2 stack-y-2 rtl:space-x-reverse",onSubmit:async e=>{e.stopPropagation(),e.preventDefault(),O===p?I(y,0):"url"===O&&(async e=>{var s;if(S)return;k(!0),C("");const t=await fetch("/api/integrations/giphy/get",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}),a=await t.json();t.ok?(f(a.image||""),a.image||C("No Result found")):C((null==a?void 0:a.message)||(null==(s=null==a?void 0:a[0])?void 0:s.message)||"Something went wrong"),k(!1)})(y)},children:[e.jsx("div",{className:"relative block w-full pt-2",children:e.jsx(n,{type:"text",placeholder:O===p?h("search_giphy"):"https://media.giphy.com/media/some-id/giphy.gif",value:y,onChange:e=>{b(e.target.value)}})}),e.jsx(a,{type:"submit",tabIndex:-1,color:"secondary",loading:S,children:h("search")})]}),u&&e.jsx("div",{className:"flex flex-col items-center space-x-2 stack-y-2 pt-3 rtl:space-x-reverse",children:e.jsx("div",{className:"bg-subtle flex w-full items-center justify-center",children:S?e.jsx("div",{className:"flex h-[200px] w-full items-center justify-center bg-gray-400 pb-3 pt-3",children:e.jsxs("svg",{className:r("mx-4 h-5 w-5 animate-spin","text-inverted dark:text-emphasis"),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):e.jsx("img",{className:"h-[200px] pb-3 pt-3",src:u,alt:`Gif from Giphy for ${y}`})})}),w&&e.jsx(o,{severity:"error",title:w,className:"my-4"}),u&&O===p&&e.jsxs("div",{className:"mt-4 flex items-center justify-between space-x-2 rtl:space-x-reverse",children:[e.jsx("div",{className:"text-subtle text-sm font-light",children:"Not the perfect GIF?"}),e.jsx(a,{size:"sm",color:"secondary",type:"button",loading:S,onClick:()=>I(y,g),children:"Shuffle"})]}),e.jsxs(c,{noSticky:!0,children:[e.jsx(d,{color:"minimal",tabIndex:-1,onClick:()=>{x.setIsOpenDialog(!1)},children:h("cancel")}),e.jsx(a,{type:"button",disabled:!u,onClick:()=>(x.setIsOpenDialog(!1),x.onSave(u),j(0),f(""),b(""),!1),children:h("add_gif")})]})]})})};function h(i){const{t:l}=t(),[n,r]=s.useState(i.defaultValue),[o,c]=s.useState(!1);return e.jsxs("div",{className:"flex flex-col items-start space-x-2 stack-y-2 rtl:space-x-reverse",children:[n&&e.jsx("div",{className:"min-h-[200px]",children:e.jsx("img",{alt:"Selected Gif Image",src:n})}),e.jsxs("div",{className:"flex gap-2",children:[n?e.jsx(a,{color:"minimal",type:"button",StartIcon:"pencil",onClick:()=>c(!0),disabled:i.disabled,children:"Change"}):e.jsx(a,{color:"minimal",type:"button",StartIcon:"plus",onClick:()=>c(!0),disabled:i.disabled,children:"Add from Giphy"}),n&&e.jsx(a,{color:"destructive",type:"button",StartIcon:"x",onClick:()=>{r(""),i.onChange("")},disabled:i.disabled,children:l("remove")})]}),e.jsx(x,{isOpenDialog:o,setIsOpenDialog:c,onSave:e=>{r(e),i.onChange(e)}})]})}const u=({getAppData:s,setAppData:t,disabled:a})=>{const i=s("thankYouPage");return e.jsx(h,{defaultValue:i,disabled:a,onChange:e=>{t("thankYouPage",e)}})};export{u as default};
