import{j as t}from"./vendor-motion-C-S6sOG7.js";import{y as e,H as a,r as s,N as n,D as o,w as d,S as r,h as i,M as l,L as D}from"./index-S7FKDcGU-BGCLkj0f.js";import{r as c}from"./vendor-react-HserkeQh.js";import"./index-gfgZRmwe.js";function m({className:m,dates:u,minDate:f,maxDate:v,onDatesChange:h,disabled:p,withoutPopover:x,popoverModal:j=!0,popoverOpen:g,onPopoverOpenChange:L,"data-testid":y,strictlyBottom:b,allowPastDates:C=!1}){const[M,w]=c.useState(void 0);const N=C&&null===f?void 0:f??new Date,O=c.useMemo(()=>{if(u.startDate&&!u.endDate&&M&&!e(u.startDate,M))return a(M,u.startDate)?{from:M,to:u.startDate}:{from:u.startDate,to:M}},[u.startDate,u.endDate,M]),k=t.jsx(s,{initialFocus:!0,fromDate:N,toDate:v,mode:"range",defaultMonth:null==u?void 0:u.startDate,selected:{from:null==u?void 0:u.startDate,to:null==u?void 0:u.endDate},onDayClick:t=>function(t){const e=function({startDate:t,endDate:e,clickedDate:a}){return!t||e?{startDate:a,endDate:void 0}:a<t?{startDate:a,endDate:t}:{startDate:t,endDate:a}}({startDate:u.startDate,endDate:u.endDate,clickedDate:t});h(e),w(void 0)}(t),onDayMouseEnter:function(t){u.startDate&&!u.endDate&&w(t)},onDayMouseLeave:function(){w(void 0)},numberOfMonths:1,disabled:p,"data-testid":y,modifiers:O?{hoverRange:O}:void 0,modifiersClassNames:O?{hoverRange:"bg-emphasis"}:void 0});return x?k:t.jsx("div",{className:i("grid gap-2",m),children:t.jsxs(n,{modal:j,open:g,onOpenChange:L,children:[t.jsx(o,{asChild:!0,children:t.jsx(d,{"data-testid":"date-range",color:"secondary",EndIcon:"calendar",className:i("justify-between text-left font-normal",!u&&"text-subtle"),children:null!=u&&u.startDate?null!=u&&u.endDate?t.jsxs(t.Fragment,{children:[r(u.startDate,"LLL dd, y")," - ",r(u.endDate,"LLL dd, y")]}):t.jsxs(t.Fragment,{children:[r(u.startDate,"LLL dd, y")," - End"]}):t.jsx("span",{children:"Pick a date"})})}),t.jsx(l,{children:t.jsx(D,{className:"bg-default text-emphasis z-50 w-auto rounded-md border p-0 outline-none",align:"start",sideOffset:4,side:b?"bottom":void 0,avoidCollisions:!b,onInteractOutside:t=>{null!=u&&u.startDate&&(null==u||!u.endDate)&&t.preventDefault()},children:k})})]})})}export{m as DatePickerWithRange};
